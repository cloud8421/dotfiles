augroup vimrcEx
  au!

  " For all text files set 'textwidth' to 78 characters.
  autocmd FileType text setlocal textwidth=78

  " When editing a file, always jump to the last known cursor position.
  " Don't do it when the position is invalid or when inside an event handler
  " (happens when dropping a file on gvim).
  autocmd BufReadPost *
    \ if line("'\"") > 0 && line("'\"") <= line("$") |
    \   exe "normal g`\"" |
    \ endif
augroup END

" Save when losing focus
au FocusLost * :silent! wall

"Reload config files after edit
if has("autocmd")
  autocmd bufwritepost .vimrc source $MYVIMRC
endif

"whitespace
autocmd BufRead * silent! %s/[\r \t]\+$//
autocmd BufEnter *.rb :%s/[ \t\r]\+$//e
